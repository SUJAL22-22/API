<!DOCTYPE html>
<html>
<head>
  <title>LocalStorage CRUD Example</title>
</head>
<body>
  <h3>Student Form</h3>
  <form id="studentForm">
    <input type="text" id="name" placeholder="Enter Name" required />
    <input type="number" id="age" placeholder="Enter Age" required />
    <button type="submit" id="saveBtn">Add</button>
  </form>

  <h3>Student List</h3>
  <table border="1" id="studentTable">
    <tr>
      <th>Name</th>
      <th>Age</th>
      <th>Action</th>
    </tr>
  </table>

  <script>
    const key = "students";
    let editIndex = null; 
    document.addEventListener("DOMContentLoaded", showData);

    document.getElementById("studentForm").addEventListener("submit", function (e) {
      e.preventDefault();

      let name = document.getElementById("name").value;
      let age = document.getElementById("age").value;
      let students = JSON.parse(localStorage.getItem(key)) || [];

      if (editIndex === null) {
        
        students.push({ name, age });
      } else {
        
        students[editIndex] = { name, age };
        editIndex = null;
        document.getElementById("saveBtn").innerText = "Add";
      }

      localStorage.setItem(key, JSON.stringify(students));
      document.getElementById("studentForm").reset();
      showData();
    });


    function showData() {
      let students = JSON.parse(localStorage.getItem(key)) || [];
      let table = document.getElementById("studentTable");

      table.innerHTML = `
        <tr>
          <th>Name</th>
          <th>Age</th>
          <th>Action</th>
        </tr>
      `;

      students.forEach((stu, index) => {
        let row = table.insertRow();
        row.insertCell(0).innerText = stu.name;
        row.insertCell(1).innerText = stu.age;
        row.insertCell(2).innerHTML = `
          <button onclick="editStudent(${index})">Edit</button>
          <button onclick="deleteStudent(${index})">Delete</button>
        `;
      });
    }

  
    function deleteStudent(index) {
      let students = JSON.parse(localStorage.getItem(key)) || [];
      students.splice(index, 1);
      localStorage.setItem(key, JSON.stringify(students));
      showData();
    }

  
    function editStudent(index) {
      let students = JSON.parse(localStorage.getItem(key)) || [];
      document.getElementById("name").value = students[index].name;
      document.getElementById("age").value = students[index].age;
      editIndex = index;
      document.getElementById("saveBtn").innerText = "Update";
    }
  </script>
</body>
</html>